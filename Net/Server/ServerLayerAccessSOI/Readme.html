<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="utf-8" />
  <title>Layer access</title>
  <style>
    table, th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    th, td {
      padding: 5px;
    }
    th {
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h2>Layer access</h2>

<h3>Purpose</h3>

<p>This sample demonstrates two things: How to handle REST, SOAP, and binary requests.How to implement layer level controls and conditionally give access to certain layers based on an external permissions file. As part of the handling of SOAP and binary requests, this samples includes an SOISupport utility class to show how to call into the ArcGIS Server default operation handlers. This sample class can be used in your own SOIs where you need to handle SOAP and binary requests. Note that this sample is not comprehensive in what operations are intercepted. Developers should use this as the basis for learning how to implement security related functionality, but all production code should be carefully vetted to ensure that all appropriate operations are handled and no information is inadvertently leaked or made accessible. This sample is dependent on a file named permission.json to be present in the directory containing the arcgisoutput server directory. For example, in a default Windows installation this is C:\arcgisserver. See Deploying extensions to learn how to deploy the extension to your server.  </p>

<h3>Usage</h3>

<ol>
<li>Deploy LayerAccessSOI.soe to your server (or your own modified version if you have changed the path for the permission.json file).  </li>
<li>Enable the SOI on a map service.  </li>
<li>Disable caching of layer resources in the ArcGIS Server REST handler.  </li>
<li>Consume the service using different users.  </li>
<li>Note how certain layers are only visible when the request is authenticated and matches the permissions defined in permission.json.  </li>
</ol>

<hr />

<h4>Licensing</h4>

<table><tr><th> Development licensing </th><th> Deployment licensing </th></tr>
<tr><td>  </td><td>  </td></tr>  
</table>

</body>
</html>